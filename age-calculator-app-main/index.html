<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- displays site properly based on user's device -->
  <link rel="icon" type="image/png" sizes="32x32" href="./assets/images/favicon-32x32.png">
  <title>Frontend Mentor | Age calculator app</title>
  <link rel="stylesheet" href="./style.css">
</head>

<body>
  <div class="container">
    <div class="calculator">
      <form id="date-form" novalidate>
        <div class="input-group">
          <label for="day">DAY</label>
          <input type="number" id="day" placeholder="DD" required class="day-input">
          <span class="validation hidden">This field is required</span>
        </div>
        <div class="input-group">
          <label for="month">MONTH</label>
          <input type="number" id="month" placeholder="MM" required class="month-input">
          <span class="validation hidden">This field is required</span>
        </div>
        <div class="input-group">
          <label for="year">YEAR</label>
          <input type="number" id="year" placeholder="YYYY" required class="year-input">
          <span class="validation hidden">This field is required</span>
        </div>
    </div>
    <div class="arrow-img">
      <span class="start"></span><button type="submit"><img src="./assets/images/icon-arrow.svg"
          alt="arrow"></button><span class="end"></span>
    </div>
    </form>
    <div class="result">
      <div class="result-item">
        <span class="number">--</span>
        <span class="text">years</span>
      </div>
      <div class="result-item">
        <span class="number">--</span>
        <span class="text">months</span>
      </div>
      <div class="result-item">
        <span class="number">--</span>
        <span class="text">days</span>
      </div>
    </div>
</body>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    // === 1Ô∏è‚É£ Get all the important elements from the DOM ===
    const form = document.getElementById('date-form');
    const dayInput = document.querySelector('.day-input');
    const monthInput = document.querySelector('.month-input');
    const yearInput = document.querySelector('.year-input');
    const spans = document.querySelectorAll('.validation');
    const result = document.querySelector('.result');

    // Labels for error highlighting
    const dayLabel = document.querySelector('label[for="day"]');
    const monthLabel = document.querySelector('label[for="month"]');
    const yearLabel = document.querySelector('label[for="year"]');

    // === 2Ô∏è‚É£ Run this when the user submits the form ===
    form.addEventListener('submit', (e) => {
      e.preventDefault(); // Prevent form from reloading the page

      // === 3Ô∏è‚É£ Get and clean user input ===
      const day = parseInt(dayInput.value.trim());
      const month = parseInt(monthInput.value.trim());
      const year = parseInt(yearInput.value.trim());

      let hasError = false; // flag to track any validation issue

      // === 4Ô∏è‚É£ Reset previous error states ===
      [dayLabel, monthLabel, yearLabel].forEach(label => label.classList.remove('error'));
      [dayInput, monthInput, yearInput].forEach(input => input.classList.remove('error'));
      spans.forEach(span => span.classList.add('hidden')); // hide all validation messages

      // === 5Ô∏è‚É£ Check for empty fields ===
      if (!day) {
        dayLabel.classList.add('error');
        dayInput.classList.add('error');
        spans[0].textContent = "This field is required";
        spans[0].classList.remove('hidden');
        hasError = true;
      }
      if (!month) {
        monthLabel.classList.add('error');
        monthInput.classList.add('error');
        spans[1].textContent = "This field is required";
        spans[1].classList.remove('hidden');
        hasError = true;
      }
      if (!year) {
        yearLabel.classList.add('error');
        yearInput.classList.add('error');
        spans[2].textContent = "This field is required";
        spans[2].classList.remove('hidden');
        hasError = true;
      }

      // === 6Ô∏è‚É£ Check valid number ranges (day 1‚Äì31, month 1‚Äì12) ===
      if (day < 1 || day > 31) {
        dayLabel.classList.add('error');
        dayInput.classList.add('error');
        spans[0].textContent = "Must be between 1 and 31";
        spans[0].classList.remove('hidden');
        hasError = true;
      }

      if (month < 1 || month > 12) {
        monthLabel.classList.add('error');
        monthInput.classList.add('error');
        spans[1].textContent = "Must be between 1 and 12";
        spans[1].classList.remove('hidden');
        hasError = true;
      }

      // üö´ If any basic validation failed, stop here (but keep result visible)
      if (hasError) return;

      // === 7Ô∏è‚É£ Validate actual calendar date (e.g. reject 31/04/1991) ===
      const birthDate = new Date(year, month - 1, day);
      if (
        birthDate.getFullYear() !== year ||
        birthDate.getMonth() !== month - 1 ||
        birthDate.getDate() !== day
      ) {
        [dayLabel, monthLabel, yearLabel].forEach(label => label.classList.add('error'));
        [dayInput, monthInput, yearInput].forEach(input => input.classList.add('error'));
        spans.forEach(span => {
          span.textContent = "Must be a valid date";
          span.classList.remove('hidden');
        });
        return;
      }

      // === 8Ô∏è‚É£ Validate that the date is not in the future ===
      const today = new Date();
      if (birthDate > today) {
        [dayLabel, monthLabel, yearLabel].forEach(label => label.classList.add('error'));
        [dayInput, monthInput, yearInput].forEach(input => input.classList.add('error'));
        spans.forEach(span => {
          span.textContent = "Date cannot be in the future";
          span.classList.remove('hidden');
        });
        return;
      }

      // === 9Ô∏è‚É£ Calculate the age (years, months, days) ===
      let years = today.getFullYear() - birthDate.getFullYear();
      let months = today.getMonth() - birthDate.getMonth();
      let days = today.getDate() - birthDate.getDate();

      // Adjust for negative days (e.g. haven't reached birthday this month)
      if (days < 0) {
        months--;
        days += new Date(today.getFullYear(), today.getMonth(), 0).getDate();
      }

      // Adjust for negative months (e.g. birthday not yet reached this year)
      if (months < 0) {
        years--;
        months += 12;
      }

      // === üîü Show the result in the UI ===
      result.innerHTML = `
        <div class="result-item">
          <span class="number">${years}</span>
          <span class="text">years</span>
        </div>
        <div class="result-item">
          <span class="number">${months}</span>
          <span class="text">months</span>
        </div>
        <div class="result-item">
          <span class="number">${days}</span>
          <span class="text">days</span>
        </div>
      `;
    });
  });
</script>





</html>
